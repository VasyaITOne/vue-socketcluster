!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.socketCluster=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./lib/scsocket"),e=a("./lib/scsocketcreator");b.exports.SCSocketCreator=e,b.exports.SCSocket=d,b.exports.SCEmitter=a("sc-emitter").SCEmitter,b.exports.connect=function(a){return e.connect(a)},b.exports.destroy=function(a){return e.destroy(a)},b.exports.version="5.0.6"},{"./lib/scsocket":4,"./lib/scsocketcreator":5,"sc-emitter":14}],2:[function(a,b,c){(function(a){var c=function(){this._internalStorage={}};c.prototype._isLocalStorageEnabled=function(){var b;try{a.localStorage,a.localStorage.setItem("__scLocalStorageTest",1),a.localStorage.removeItem("__scLocalStorageTest")}catch(a){b=a}return!b},c.prototype.saveToken=function(b,c,d,e){this._isLocalStorageEnabled()&&a.localStorage?a.localStorage.setItem(b,c):this._internalStorage[b]=c,e&&e(null,c)},c.prototype.removeToken=function(b,c){var d;this.loadToken(b,function(a,b){d=b}),this._isLocalStorageEnabled()&&a.localStorage&&a.localStorage.removeItem(b),delete this._internalStorage[b],c&&c(null,d)},c.prototype.loadToken=function(b,c){var d;d=this._isLocalStorageEnabled()&&a.localStorage?a.localStorage.getItem(b):this._internalStorage[b]||null,c(null,d)},b.exports.AuthEngine=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){var d=a("sc-errors"),e=d.InvalidActionError,f=function(a,b){this.socket=a,this.id=b,this.sent=!1};f.prototype._respond=function(a){if(this.sent)throw new e("Response "+this.id+" has already been sent");this.sent=!0,this.socket.send(this.socket.stringify(a))},f.prototype.end=function(a){if(this.id){var b={rid:this.id};void 0!==a&&(b.data=a),this._respond(b)}},f.prototype.error=function(a,b){if(this.id){var c=d.dehydrateError(a),e={rid:this.id,error:c};void 0!==b&&(e.data=b),this._respond(e)}},f.prototype.callback=function(a,b){a?this.error(a,b):this.end(b)},b.exports.Response=f},{"sc-errors":16}],4:[function(a,b,c){(function(c,d){var e=a("sc-emitter").SCEmitter,f=a("sc-channel").SCChannel,h=(a("./response").Response,a("./auth").AuthEngine),i=a("./sctransport").SCTransport,j=a("querystring"),k=a("linked-list"),l=a("base-64"),m=a("sc-errors"),n=m.InvalidArgumentsError,o=m.InvalidMessageError,p=m.SocketProtocolError,q=m.TimeoutError,r="undefined"!=typeof window,s=function(a){var b=this;e.call(this),this.id=null,this.state=this.CLOSED,this.authState=this.PENDING,this.signedAuthToken=null,this.authToken=null,this.pendingReconnect=!1,this.pendingReconnectTimeout=null,this.pendingConnectCallback=!1,this.connectTimeout=a.connectTimeout,this.ackTimeout=a.ackTimeout,this.channelPrefix=a.channelPrefix||null,this.pingTimeout=this.ackTimeout;var d=Math.pow(2,31)-1,f=function(a){if(b[a]>d)throw new n("The "+a+" value provided exceeded the maximum amount allowed")};if(f("connectTimeout"),f("ackTimeout"),f("pingTimeout"),this._localEvents={connect:1,connectAbort:1,disconnect:1,message:1,error:1,raw:1,fail:1,kickOut:1,subscribe:1,unsubscribe:1,subscribeStateChange:1,authStateChange:1,authenticate:1,deauthenticate:1,removeAuthToken:1,subscribeRequest:1},this.connectAttempts=0,this._emitBuffer=new k,this._channels={},this.options=a,this._cid=1,this.options.callIdGenerator=function(){return b._callIdGenerator()},this.options.autoReconnect){null==this.options.autoReconnectOptions&&(this.options.autoReconnectOptions={});var g=this.options.autoReconnectOptions;null==g.initialDelay&&(g.initialDelay=1e4),null==g.randomness&&(g.randomness=1e4),null==g.multiplier&&(g.multiplier=1.5),null==g.maxDelay&&(g.maxDelay=6e4)}if(null==this.options.subscriptionRetryOptions&&(this.options.subscriptionRetryOptions={}),this.options.authEngine?this.auth=this.options.authEngine:this.auth=new h,this.options.path=this.options.path.replace(/\/$/,"")+"/",this.options.query=a.query||{},"string"==typeof this.options.query&&(this.options.query=j.parse(this.options.query)),this.connect(),this._channelEmitter=new e,r){var i=function(){b.disconnect()};c.attachEvent?c.attachEvent("onunload",i):c.addEventListener&&c.addEventListener("beforeunload",i,!1)}};s.prototype=Object.create(e.prototype),s.CONNECTING=s.prototype.CONNECTING=i.prototype.CONNECTING,s.OPEN=s.prototype.OPEN=i.prototype.OPEN,s.CLOSED=s.prototype.CLOSED=i.prototype.CLOSED,s.AUTHENTICATED=s.prototype.AUTHENTICATED="authenticated",s.UNAUTHENTICATED=s.prototype.UNAUTHENTICATED="unauthenticated",s.PENDING=s.prototype.PENDING="pending",s.ignoreStatuses=m.socketProtocolIgnoreStatuses,s.errorStatuses=m.socketProtocolErrorStatuses,s.prototype._privateEventHandlerMap={"#publish":function(a){var b=this._undecorateChannelName(a.channel),c=this.isSubscribed(b,!0);c&&this._channelEmitter.emit(b,a.data)},"#kickOut":function(a){var b=this._undecorateChannelName(a.channel),c=this._channels[b];c&&(e.prototype.emit.call(this,"kickOut",a.message,b),c.emit("kickOut",a.message,b),this._triggerChannelUnsubscribe(c))},"#setAuthToken":function(a,b){var c=this;if(a){var d=function(d){d?(b.error(d),c._onSCError(d)):(c._changeToAuthenticatedState(a.token),b.end())};this.auth.saveToken(this.options.authTokenName,a.token,{},d)}else b.error(new o("No token data provided by #setAuthToken event"))},"#removeAuthToken":function(a,b){var c=this;this.auth.removeToken(this.options.authTokenName,function(a,d){a?(b.error(a),c._onSCError(a)):(e.prototype.emit.call(c,"removeAuthToken",d),c._changeToUnauthenticatedState(),b.end())})},"#disconnect":function(a){this.transport.close(a.code,a.data)}},s.prototype._callIdGenerator=function(){return this._cid++},s.prototype.getState=function(){return this.state},s.prototype.getBytesReceived=function(){return this.transport.getBytesReceived()},s.prototype.deauthenticate=function(a){var b=this;this.auth.removeToken(this.options.authTokenName,function(c,d){b.emit("#removeAuthToken"),a&&a(c),c?b._onSCError(c):(e.prototype.emit.call(b,"removeAuthToken",d),b._changeToUnauthenticatedState())})},s.prototype.connect=s.prototype.open=function(){var a=this;this.state==this.CLOSED&&(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this.state=this.CONNECTING,this._changeToPendingAuthState(),this.transport&&this.transport.off(),this.transport=new i(this.auth,this.options),this.transport.on("open",function(b){a.state=a.OPEN,a._onSCOpen(b)}),this.transport.on("error",function(b){a._onSCError(b)}),this.transport.on("close",function(b,c){a.state=a.CLOSED,a._onSCClose(b,c)}),this.transport.on("openAbort",function(b,c){a.state=a.CLOSED,a._onSCClose(b,c,!0)}),this.transport.on("event",function(b,c,d){a._onSCEvent(b,c,d)}))},s.prototype.reconnect=function(){this.disconnect(),this.connect()},s.prototype.disconnect=function(a,b){if(a=a||1e3,this.state==this.OPEN){var c={code:a,data:b};this.transport.emit("#disconnect",c),this.transport.close(a,b)}else this.state==this.CONNECTING?this.transport.close(a,b):(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef))},s.prototype._changeToPendingAuthState=function(){if(this.authState!=this.PENDING){var a=this.authState;this.authState=this.PENDING;var b={oldState:a,newState:this.authState};e.prototype.emit.call(this,"authStateChange",b)}},s.prototype._changeToUnauthenticatedState=function(){if(this.authState!=this.UNAUTHENTICATED){var a=this.authState;this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null;var b={oldState:a,newState:this.authState};e.prototype.emit.call(this,"authStateChange",b),a==this.AUTHENTICATED&&e.prototype.emit.call(this,"deauthenticate"),e.prototype.emit.call(this,"authTokenChange",this.signedAuthToken)}},s.prototype._changeToAuthenticatedState=function(a){if(this.signedAuthToken=a,this.authToken=this._extractAuthTokenData(a),this.authState!=this.AUTHENTICATED){var b=this.authState;this.authState=this.AUTHENTICATED;var c={oldState:b,newState:this.authState,signedAuthToken:a,authToken:this.authToken};this.processPendingSubscriptions(),e.prototype.emit.call(this,"authStateChange",c),e.prototype.emit.call(this,"authenticate",a)}e.prototype.emit.call(this,"authTokenChange",a)},s.prototype.decodeBase64=function(a){var b;if("undefined"==typeof d)b=c.atob?c.atob(a):l.decode(a);else{var e=new d(a,"base64");b=e.toString("utf8")}return b},s.prototype.encodeBase64=function(a){var b;if("undefined"==typeof d)b=c.btoa?c.btoa(a):l.encode(a);else{var e=new d(a,"utf8");b=e.toString("base64")}return b},s.prototype._extractAuthTokenData=function(a){var b=(a||"").split("."),c=b[1];if(null!=c){var d=c;try{return d=this.decodeBase64(d),JSON.parse(d)}catch(a){return d}}return null},s.prototype.getAuthToken=function(){return this.authToken},s.prototype.getSignedAuthToken=function(){return this.signedAuthToken},s.prototype.authenticate=function(a,b){var c=this;this._changeToPendingAuthState(),this.emit("#authenticate",a,function(d,e){e&&e.authError&&(e.authError=m.hydrateError(e.authError)),d?(c._changeToUnauthenticatedState(),b&&b(d,e)):c.auth.saveToken(c.options.authTokenName,a,{},function(d){b&&b(d,e),d?(c._changeToUnauthenticatedState(),c._onSCError(d)):e.isAuthenticated?c._changeToAuthenticatedState(a):c._changeToUnauthenticatedState()})})},s.prototype._tryReconnect=function(a){var e,b=this,c=this.connectAttempts++,d=this.options.autoReconnectOptions;if(null==a||c>0){var f=Math.round(d.initialDelay+(d.randomness||0)*Math.random());e=Math.round(f*Math.pow(d.multiplier,c))}else e=a;e>d.maxDelay&&(e=d.maxDelay),clearTimeout(this._reconnectTimeoutRef),this.pendingReconnect=!0,this.pendingReconnectTimeout=e,this._reconnectTimeoutRef=setTimeout(function(){b.connect()},e)},s.prototype._onSCOpen=function(a){var b=this;a?(this.id=a.id,this.pingTimeout=a.pingTimeout,this.transport.pingTimeout=this.pingTimeout,a.isAuthenticated?this._changeToAuthenticatedState(a.authToken):this._changeToUnauthenticatedState()):this._changeToUnauthenticatedState(),this.connectAttempts=0,this.options.autoProcessSubscriptions?this.processPendingSubscriptions():this.pendingConnectCallback=!0,e.prototype.emit.call(this,"connect",a,function(){b.processPendingSubscriptions()}),this._flushEmitBuffer()},s.prototype._onSCError=function(a){var b=this;setTimeout(function(){if(b.listeners("error").length<1)throw a;e.prototype.emit.call(b,"error",a)},0)},s.prototype._suspendSubscriptions=function(){var a,b;for(var c in this._channels)this._channels.hasOwnProperty(c)&&(a=this._channels[c],b=a.state==a.SUBSCRIBED||a.state==a.PENDING?a.PENDING:a.UNSUBSCRIBED,this._triggerChannelUnsubscribe(a,b))},s.prototype._onSCClose=function(a,b,c){var d=this;if(this.id=null,this.transport&&this.transport.off(),this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this._changeToPendingAuthState(),this._suspendSubscriptions(),this.options.autoReconnect&&(4e3==a||4001==a||1005==a?this._tryReconnect(0):1e3!=a&&a<4500&&this._tryReconnect()),c?e.prototype.emit.call(d,"connectAbort",a,b):e.prototype.emit.call(d,"disconnect",a,b),!s.ignoreStatuses[a]){var f;f=b?"Socket connection failed: "+b:"Socket connection failed for unknown reasons";var g=new p(s.errorStatuses[a]||f,a);this._onSCError(g)}},s.prototype._onSCEvent=function(a,b,c){var d=this._privateEventHandlerMap[a];d?d.call(this,b,c):e.prototype.emit.call(this,a,b,function(){c&&c.callback.apply(c,arguments)})},s.prototype.parse=function(a){return this.transport.parse(a)},s.prototype.stringify=function(a){return this.transport.stringify(a)},s.prototype._flushEmitBuffer=function(){for(var b,a=this._emitBuffer.head;a;){b=a.next;var c=a.data;a.detach(),this.transport.emitRaw(c),a=b}},s.prototype._handleEventAckTimeout=function(a,b){b&&b.detach();var c=new q("Event response for '"+a.event+"' timed out"),d=a.callback;d&&(delete a.callback,d.call(a,c,a))},s.prototype._emit=function(a,b,c){var d=this;this.state==this.CLOSED&&this.connect();var e={event:a,data:b,callback:c},f=new k.Item;f.data=e,e.timeout=setTimeout(function(){d._handleEventAckTimeout(e,f)},this.ackTimeout),this._emitBuffer.append(f),this.state==this.OPEN&&this._flushEmitBuffer()},s.prototype.send=function(a){this.transport.send(a)},s.prototype.emit=function(a,b,c){null==this._localEvents[a]?this._emit(a,b,c):e.prototype.emit.call(this,a,b)},s.prototype.publish=function(a,b,c){var d={channel:this._decorateChannelName(a),data:b};this.emit("#publish",d,c)},s.prototype._triggerChannelSubscribe=function(a,b){var c=a.name;if(a.state!=a.SUBSCRIBED){var d=a.state;a.state=a.SUBSCRIBED;var f={channel:c,oldState:d,newState:a.state,subscriptionOptions:b};a.emit("subscribeStateChange",f),a.emit("subscribe",c,b),e.prototype.emit.call(this,"subscribeStateChange",f),e.prototype.emit.call(this,"subscribe",c,b)}},s.prototype._triggerChannelSubscribeFail=function(a,b,c){var d=b.name,f=!b.waitForAuth||this.authState==this.AUTHENTICATED;b.state!=b.UNSUBSCRIBED&&f&&(b.state=b.UNSUBSCRIBED,b.emit("subscribeFail",a,d,c),e.prototype.emit.call(this,"subscribeFail",a,d,c))},s.prototype._cancelPendingSubscribeCallback=function(a){null!=a._pendingSubscriptionCid&&(this.transport.cancelPendingResponse(a._pendingSubscriptionCid),delete a._pendingSubscriptionCid)},s.prototype._decorateChannelName=function(a){return this.channelPrefix&&(a=this.channelPrefix+a),a},s.prototype._undecorateChannelName=function(a){return this.channelPrefix&&0==a.indexOf(this.channelPrefix)?a.replace(this.channelPrefix,""):a},s.prototype._trySubscribe=function(a){var b=this,c=!a.waitForAuth||this.authState==this.AUTHENTICATED;if(this.state==this.OPEN&&!this.pendingConnectCallback&&null==a._pendingSubscriptionCid&&c){var d={noTimeout:!0},f={channel:this._decorateChannelName(a.name)};a.waitForAuth&&(d.waitForAuth=!0,f.waitForAuth=d.waitForAuth),a.data&&(f.data=a.data),a._pendingSubscriptionCid=this.transport.emit("#subscribe",f,d,function(c){delete a._pendingSubscriptionCid,c?b._triggerChannelSubscribeFail(c,a,f):b._triggerChannelSubscribe(a,f)}),e.prototype.emit.call(this,"subscribeRequest",a.name,f)}},s.prototype.subscribe=function(a,b){var c=this._channels[a];return c?b&&c.setOptions(b):(c=new f(a,this,b),this._channels[a]=c),c.state==c.UNSUBSCRIBED&&(c.state=c.PENDING,this._trySubscribe(c)),c},s.prototype._triggerChannelUnsubscribe=function(a,b){var c=a.name,d=a.state;if(b?a.state=b:a.state=a.UNSUBSCRIBED,this._cancelPendingSubscribeCallback(a),d==a.SUBSCRIBED){var f={channel:c,oldState:d,newState:a.state};a.emit("subscribeStateChange",f),a.emit("unsubscribe",c),e.prototype.emit.call(this,"subscribeStateChange",f),e.prototype.emit.call(this,"unsubscribe",c)}},s.prototype._tryUnsubscribe=function(a){if(this.state==this.OPEN){var c={noTimeout:!0};this._cancelPendingSubscribeCallback(a);var d=this._decorateChannelName(a.name);this.transport.emit("#unsubscribe",d,c)}},s.prototype.unsubscribe=function(a){var b=this._channels[a];b&&b.state!=b.UNSUBSCRIBED&&(this._triggerChannelUnsubscribe(b),this._tryUnsubscribe(b))},s.prototype.channel=function(a,b){var c=this._channels[a];return c||(c=new f(a,this,b),this._channels[a]=c),c},s.prototype.destroyChannel=function(a){var b=this._channels[a];b.unwatch(),b.unsubscribe(),delete this._channels[a]},s.prototype.subscriptions=function(a){var c,d,b=[];for(var e in this._channels)this._channels.hasOwnProperty(e)&&(c=this._channels[e],d=a?c&&(c.state==c.SUBSCRIBED||c.state==c.PENDING):c&&c.state==c.SUBSCRIBED,d&&b.push(e));return b},s.prototype.isSubscribed=function(a,b){var c=this._channels[a];return b?!!c&&(c.state==c.SUBSCRIBED||c.state==c.PENDING):!!c&&c.state==c.SUBSCRIBED},s.prototype.processPendingSubscriptions=function(){var a=this;this.pendingConnectCallback=!1;for(var b in this._channels)this._channels.hasOwnProperty(b)&&!function(b){b.state==b.PENDING&&a._trySubscribe(b)}(this._channels[b])},s.prototype.watch=function(a,b){if("function"!=typeof b)throw new n("No handler function was provided");this._channelEmitter.on(a,b)},s.prototype.unwatch=function(a,b){b?this._channelEmitter.removeListener(a,b):this._channelEmitter.removeAllListeners(a)},s.prototype.watchers=function(a){return this._channelEmitter.listeners(a)},b.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"./auth":2,"./response":3,"./sctransport":6,"base-64":8,buffer:19,"linked-list":12,querystring:24,"sc-channel":13,"sc-emitter":14,"sc-errors":16}],5:[function(a,b,c){(function(c){function f(a){var b=a.secure?"https://":"http://",c="";if(a.query)if("string"==typeof a.query)c=a.query;else{var d=[],e=a.query;for(var f in e)e.hasOwnProperty(f)&&d.push(f+"="+e[f]);d.length&&(c="?"+d.join("&"))}return b+a.hostname+":"+a.port+a.path+c}function g(){return c.location&&"https:"==location.protocol}function h(a,b){var d=null==a.secure?b:a.secure;return a.port||(c.location&&location.port?location.port:d?443:80)}function i(a){a=a||{};var i=g(),j={port:h(a,i),hostname:c.location&&location.hostname,path:"/socketcluster/",secure:i,autoReconnect:!0,autoProcessSubscriptions:!0,connectTimeout:2e4,ackTimeout:1e4,timestampRequests:!1,timestampParam:"t",authEngine:null,authTokenName:"socketCluster.authToken",binaryType:"arraybuffer",multiplex:!0};for(var k in a)a.hasOwnProperty(k)&&(j[k]=a[k]);var l=f(j);return j.multiplex===!1?new d(j):(e[l]?e[l].connect():e[l]=new d(j),e[l])}function j(a){a=a||{};var d=g(),i={port:h(a,d),hostname:c.location&&location.hostname,path:"/socketcluster/",secure:d};for(var j in a)a.hasOwnProperty(j)&&(i[j]=a[j]);var k=f(i);delete e[k]}var d=a("./scsocket"),e={};b.exports={connect:i,destroy:j}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./scsocket":4}],6:[function(a,b,c){var d=a("sc-emitter").SCEmitter,e=a("sc-formatter"),f=a("./response").Response,g=a("querystring"),h=a("ws"),i=a("sc-errors"),j=i.TimeoutError,k=function(a,b){this.state=this.CLOSED,this.auth=a,this.options=b,this.connectTimeout=b.connectTimeout,this.pingTimeout=b.ackTimeout,this.callIdGenerator=b.callIdGenerator,this._pingTimeoutTicker=null,this._callbackMap={},this.open()};k.prototype=Object.create(d.prototype),k.CONNECTING=k.prototype.CONNECTING="connecting",k.OPEN=k.prototype.OPEN="open",k.CLOSED=k.prototype.CLOSED="closed",k.prototype.uri=function(){var a=this.options.query||{},b=this.options.secure?"wss":"ws",c="";return this.options.port&&("wss"==b&&443!=this.options.port||"ws"==b&&80!=this.options.port)&&(c=":"+this.options.port),this.options.timestampRequests&&(a[this.options.timestampParam]=(new Date).getTime()),a=g.stringify(a),a.length&&(a="?"+a),b+"://"+this.options.hostname+c+this.options.path+a},k.prototype.open=function(){var a=this;this.state=this.CONNECTING;var b=this.uri(),c=new h(b,null,this.options);c.binaryType=this.options.binaryType,this.socket=c,c.onopen=function(){a._onOpen()},c.onclose=function(b){a._onClose(b.code,b.reason)},c.onmessage=function(b,c){a._onMessage(b.data)},c.onerror=function(b){a.state===a.CONNECTING&&a._onClose(1006)},this._connectTimeoutRef=setTimeout(function(){a._onClose(4007),a.socket.close(4007)},this.connectTimeout)},k.prototype._onOpen=function(){var a=this;clearTimeout(this._connectTimeoutRef),this._resetPingTimeout(),this._handshake(function(b,c){b?(a._onError(b),a._onClose(4003),a.socket.close(4003)):(a.state=a.OPEN,d.prototype.emit.call(a,"open",c),a._resetPingTimeout())})},k.prototype._handshake=function(a){var b=this;this.auth.loadToken(this.options.authTokenName,function(c,d){if(c)a(c);else{var e={force:!0};b.emit("#handshake",{authToken:d},e,function(b,c){c&&(c.authToken=d,c.authError&&(c.authError=i.hydrateError(c.authError))),a(b,c)})}})},k.prototype._onClose=function(a,b){delete this.socket.onopen,delete this.socket.onclose,delete this.socket.onmessage,delete this.socket.onerror,clearTimeout(this._connectTimeoutRef),this.state==this.OPEN?(this.state=this.CLOSED,d.prototype.emit.call(this,"close",a,b)):this.state==this.CONNECTING&&(this.state=this.CLOSED,d.prototype.emit.call(this,"openAbort",a,b))},k.prototype._onMessage=function(a){if(d.prototype.emit.call(this,"event","message",a),"#1"==a)this._resetPingTimeout(),this.socket.readyState==this.socket.OPEN&&this.socket.send("#2");else{var b=this.parse(a),c=b.event;if(c){var e=new f(this,b.cid);d.prototype.emit.call(this,"event",c,b.data,e)}else if(null!=b.rid){var g=this._callbackMap[b.rid];if(g&&(clearTimeout(g.timeout),delete this._callbackMap[b.rid],g.callback)){var h=i.hydrateError(b.error);g.callback(h,b.data)}}else d.prototype.emit.call(this,"event","raw",b)}},k.prototype._onError=function(a){d.prototype.emit.call(this,"error",a)},k.prototype._resetPingTimeout=function(){var a=this;(new Date).getTime();clearTimeout(this._pingTimeoutTicker),this._pingTimeoutTicker=setTimeout(function(){a._onClose(4e3),a.socket.close(4e3)},this.pingTimeout)},k.prototype.getBytesReceived=function(){return this.socket.bytesReceived},k.prototype.close=function(a,b){if(a=a||1e3,this.state==this.OPEN){var c={code:a,data:b};this.emit("#disconnect",c),this._onClose(a,b),this.socket.close(a)}else this.state==this.CONNECTING&&(this._onClose(a,b),this.socket.close(a))},k.prototype.emitRaw=function(a){a.cid=this.callIdGenerator(),a.callback&&(this._callbackMap[a.cid]=a);var b={event:a.event,data:a.data,cid:a.cid};return this.sendObject(b),a.cid},k.prototype._handleEventAckTimeout=function(a){var b="Event response for '"+a.event+"' timed out",c=new j(b);a.cid&&delete this._callbackMap[a.cid];var d=a.callback;delete a.callback,d.call(a,c,a)},k.prototype.emit=function(a,b,c,d){var f,g,e=this;d?(g=c,f=d):c instanceof Function?(g={},f=c):g=c;var h={event:a,data:b,callback:f};f&&!g.noTimeout&&(h.timeout=setTimeout(function(){e._handleEventAckTimeout(h)},this.options.ackTimeout));var i=null;return(this.state==this.OPEN||g.force)&&(i=this.emitRaw(h)),i},k.prototype.cancelPendingResponse=function(a){delete this._callbackMap[a]},k.prototype.parse=function(a){return e.parse(a)},k.prototype.stringify=function(a){return e.stringify(a)},k.prototype.send=function(a){this.socket.readyState!=this.socket.OPEN?this._onClose(1005):this.socket.send(a)},k.prototype.sendObject=function(a){var b,c;try{b=this.stringify(a)}catch(a){c=a,this._onError(c)}c||this.send(b)},b.exports.SCTransport=k},{"./response":3,querystring:24,"sc-emitter":14,"sc-errors":16,"sc-formatter":17,ws:7}],7:[function(a,b,c){function f(a,b,c){var d;return d=b?new e(a,b):new e(a)}var d="undefined"!=typeof window&&window||function(){return this}(),e=d.WebSocket||d.MozWebSocket;e&&(f.prototype=e.prototype),b.exports=e?f:null},{}],8:[function(a,b,c){(function(a){!function(d){var e="object"==typeof c&&c,f="object"==typeof b&&b&&b.exports==e&&b,g="object"==typeof a&&a;g.global!==g&&g.window!==g||(d=g);var h=function(a){this.message=a};h.prototype=new Error,h.prototype.name="InvalidCharacterError";var i=function(a){throw new h(a)},j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=/[\t\n\f\r ]/g,l=function(a){a=String(a).replace(k,"");var b=a.length;b%4==0&&(a=a.replace(/==?$/,""),b=a.length),(b%4==1||/[^+a-zA-Z0-9\/]/.test(a))&&i("Invalid character: the string to be decoded is not correctly encoded.");for(var d,e,c=0,f="",g=-1;++g<b;)e=j.indexOf(a.charAt(g)),d=c%4?64*d+e:e,c++%4&&(f+=String.fromCharCode(255&d>>(-2*c&6)));return f},m=function(a){a=String(a),/[^\0-\xFF]/.test(a)&&i("The string to be encoded contains characters outside of the Latin1 range.");for(var e,f,g,k,b=a.length%3,c="",d=-1,l=a.length-b;++d<l;)e=a.charCodeAt(d)<<16,f=a.charCodeAt(++d)<<8,g=a.charCodeAt(++d),k=e+f+g,c+=j.charAt(k>>18&63)+j.charAt(k>>12&63)+j.charAt(k>>6&63)+j.charAt(63&k);return 2==b?(e=a.charCodeAt(d)<<8,f=a.charCodeAt(++d),k=e+f,c+=j.charAt(k>>10)+j.charAt(k>>4&63)+j.charAt(k<<2&63)+"="):1==b&&(k=a.charCodeAt(d),c+=j.charAt(k>>2)+j.charAt(k<<4&63)+"=="),c},n={encode:m,decode:l,version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return n});else if(e&&!e.nodeType)if(f)f.exports=n;else for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o]);else d.base64=n}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],10:[function(require,module,exports){var cycle=exports;cycle.decycle=function(b){"use strict";var c=[],d=[];return function a(b,e){var f,g,h;if(!("object"!=typeof b||null===b||b instanceof Boolean||b instanceof Date||b instanceof Number||b instanceof RegExp||b instanceof String)){for(f=0;f<c.length;f+=1)if(c[f]===b)return{$ref:d[f]};if(c.push(b),d.push(e),"[object Array]"===Object.prototype.toString.apply(b))for(h=[],f=0;f<b.length;f+=1)h[f]=a(b[f],e+"["+f+"]");else{h={};for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&(h[g]=a(b[g],e+"["+JSON.stringify(g)+"]"))}return h}return b}(b,"$")},cycle.retrocycle=function retrocycle($){"use strict";var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"==typeof item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"==typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$}},{}],11:[function(a,b,c){"use strict";function e(){if(arguments.length)return e.from(arguments)}function g(){}var d;d="An argument without append, prepend, or detach methods was given to `List";var f;f=e.prototype,e.of=function(){return e.from.call(this,arguments)},e.from=function(a){var c,d,e,b=new this;if(a&&(c=a.length))for(d=-1;++d<c;)e=a[d],null!==e&&void 0!==e&&b.append(e);return b},f.head=null,f.tail=null,f.toArray=function(){for(var a=this.head,b=[];a;)b.push(a),a=a.next;return b},f.prepend=function(a){if(!a)return!1;if(!a.append||!a.prepend||!a.detach)throw new Error(d+"#prepend`.");var b,c;return b=this,(c=b.head)?c.prepend(a):(a.detach(),a.list=b,b.head=a,a)},f.append=function(a){if(!a)return!1;if(!a.append||!a.prepend||!a.detach)throw new Error(d+"#append`.");var b,c,e;return b=this,(e=b.tail)?e.append(a):(c=b.head)?c.append(a):(a.detach(),a.list=b,b.head=a,a)},e.Item=g;var h=g.prototype;h.next=null,h.prev=null,h.list=null,h.detach=function(){var a=this,b=a.list,c=a.prev,d=a.next;return b?(b.tail===a&&(b.tail=c),b.head===a&&(b.head=d),b.tail===b.head&&(b.tail=null),c&&(c.next=d),d&&(d.prev=c),a.prev=a.next=a.list=null,a):a},h.prepend=function(a){if(!(a&&a.append&&a.prepend&&a.detach))throw new Error(d+"Item#prepend`.");var b=this,c=b.list,e=b.prev;return!!c&&(a.detach(),e&&(a.prev=e,e.next=a),a.next=b,a.list=c,b.prev=a,b===c.head&&(c.head=a),c.tail||(c.tail=b),a)},h.append=function(a){if(!(a&&a.append&&a.prepend&&a.detach))throw new Error(d+"Item#append`.");var b=this,c=b.list,e=b.next;return!!c&&(a.detach(),e&&(a.next=e,e.prev=a),a.prev=b,a.list=c,b.next=a,b!==c.tail&&c.tail||(c.tail=a),a)},b.exports=e},{}],12:[function(a,b,c){"use strict";b.exports=a("./_source/linked-list.js")},{"./_source/linked-list.js":11}],13:[function(a,b,c){var d=a("sc-emitter").SCEmitter,e=function(a,b,c){d.call(this),this.PENDING="pending",this.SUBSCRIBED="subscribed",this.UNSUBSCRIBED="unsubscribed",this.name=a,this.state=this.UNSUBSCRIBED,this.client=b,this.options=c||{},this.setOptions(this.options)};e.prototype=Object.create(d.prototype),e.prototype.setOptions=function(a){a||(a={}),this.waitForAuth=a.waitForAuth||!1,void 0!==a.data&&(this.data=a.data)},e.prototype.getState=function(){return this.state},e.prototype.subscribe=function(a){this.client.subscribe(this.name,a)},e.prototype.unsubscribe=function(){this.client.unsubscribe(this.name)},e.prototype.isSubscribed=function(a){return this.client.isSubscribed(this.name,a)},e.prototype.publish=function(a,b){this.client.publish(this.name,a,b)},e.prototype.watch=function(a){this.client.watch(this.name,a)},e.prototype.unwatch=function(a){this.client.unwatch(this.name,a)},e.prototype.watchers=function(){return this.client.watchers(this.name)},e.prototype.destroy=function(){this.client.destroyChannel(this.name)},b.exports.SCChannel=e},{"sc-emitter":14}],14:[function(a,b,c){var d=a("component-emitter");Object.create||(Object.create=a("./objectcreate"));var e=function(){d.call(this)};e.prototype=Object.create(d.prototype),e.prototype.emit=function(a){if("error"==a&&this.domain){var b=arguments[1];b||(b=new Error('Uncaught, unspecified "error" event.')),b.domainEmitter=this,b.domain=this.domain,b.domainThrown=!1,this.domain.emit("error",b)}d.prototype.emit.apply(this,arguments)},b.exports.SCEmitter=e},{"./objectcreate":15,"component-emitter":9}],15:[function(a,b,c){b.exports.create=function(){function a(){}return function(b){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}()},{}],16:[function(a,b,c){function f(a,b){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="AuthTokenExpiredError",this.message=a,this.expiry=b}function g(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="AuthTokenInvalidError",this.message=a}function h(a,b){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="SilentMiddlewareBlockedError",this.message=a,this.type=b}function i(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="InvalidActionError",this.message=a}function j(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="InvalidArgumentsError",this.message=a}function k(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="InvalidOptionsError",this.message=a}function l(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,
this.name="InvalidMessageError",this.message=a}function m(a,b){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="SocketProtocolError",this.message=a,this.code=b}function n(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="ServerProtocolError",this.message=a}function o(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="HTTPServerError",this.message=a}function p(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="ResourceLimitError",this.message=a}function q(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="TimeoutError",this.message=a}function r(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="BrokerError",this.message=a}function s(a,b){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="ProcessExitError",this.message=a,this.code=b}function t(a){Error.captureStackTrace&&!e?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="UnknownError",this.message=a}var d=a("cycle"),e=function(){return!this}();f.prototype=Object.create(Error.prototype),g.prototype=Object.create(Error.prototype),h.prototype=Object.create(Error.prototype),i.prototype=Object.create(Error.prototype),j.prototype=Object.create(Error.prototype),k.prototype=Object.create(Error.prototype),l.prototype=Object.create(Error.prototype),m.prototype=Object.create(Error.prototype),n.prototype=Object.create(Error.prototype),o.prototype=Object.create(Error.prototype),p.prototype=Object.create(Error.prototype),q.prototype=Object.create(Error.prototype),r.prototype=Object.create(Error.prototype),s.prototype=Object.create(Error.prototype),t.prototype=Object.create(Error.prototype),b.exports={AuthTokenExpiredError:f,AuthTokenInvalidError:g,SilentMiddlewareBlockedError:h,InvalidActionError:i,InvalidArgumentsError:j,InvalidOptionsError:k,InvalidMessageError:l,SocketProtocolError:m,ServerProtocolError:n,HTTPServerError:o,ResourceLimitError:p,TimeoutError:q,BrokerError:r,ProcessExitError:s,UnknownError:t},b.exports.socketProtocolErrorStatuses={1001:"Socket was disconnected",1002:"A WebSocket protocol error was encountered",1003:"Server terminated socket because it received invalid data",1005:"Socket closed without status code",1006:"Socket hung up",1007:"Message format was incorrect",1008:"Encountered a policy violation",1009:"Message was too big to process",1010:"Client ended the connection because the server did not comply with extension requirements",1011:"Server encountered an unexpected fatal condition",4e3:"Server ping timed out",4001:"Client pong timed out",4002:"Server failed to sign auth token",4003:"Failed to complete handshake",4004:"Client failed to save auth token",4005:"Did not receive #handshake from client before timeout",4006:"Failed to bind socket to message broker",4007:"Client connection establishment timed out"},b.exports.socketProtocolIgnoreStatuses={1e3:"Socket closed normally",1001:"Socket hung up"};var u={domain:1,domainEmitter:1,domainThrown:1};b.exports.dehydrateError=function(a,b){var c;if("string"==typeof a)c=a;else{c={message:a.message},b&&(c.stack=a.stack);for(var e in a)u[e]||(c[e]=a[e])}return d.decycle(c)},b.exports.hydrateError=function(a){var b=null;if(null!=a)if("string"==typeof a)b=a;else{b=new Error(a.message);for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}return b}},{cycle:10}],17:[function(a,b,c){(function(a){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";b.exports.parse=function(a){if(null==a)return null;var b=a.toString();try{return JSON.parse(b)}catch(a){}return b};var d=function(a){for(var b=new Uint8Array(a),d=b.length,e="",f=0;f<d;f+=3)e+=c[b[f]>>2],e+=c[(3&b[f])<<4|b[f+1]>>4],e+=c[(15&b[f+1])<<2|b[f+2]>>6],e+=c[63&b[f+2]];return d%3===2?e=e.substring(0,e.length-1)+"=":d%3===1&&(e=e.substring(0,e.length-2)+"=="),e},e=function(a,b){return b.indexOf(a)>-1},f=function(b,c){if(c||(c=[]),e(b,c))throw new Error("Cannot traverse circular structure");var g=c.concat([b]);if(a.ArrayBuffer&&b instanceof a.ArrayBuffer)b={base64:!0,data:d(b)};else if(a.Buffer&&b instanceof a.Buffer)b={base64:!0,data:b.toString("base64")};else if(b instanceof Array)for(var h in b)b.hasOwnProperty(h)&&(b[h]=f(b[h],g));else if(b instanceof Object)for(var i in b)b.hasOwnProperty(i)&&(b[i]=f(b[i],g));return b};b.exports.stringify=function(a){var b=f(a);return JSON.stringify(b)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(a,b,c){!function(a){"use strict";function k(a){var b=a.charCodeAt(0);return b===d||b===i?62:b===e||b===j?63:b<f?-1:b<f+10?b-f+26+26:b<h+26?b-h:b<g+26?b-g+26:void 0}function l(a){function l(a){h[j++]=a}var b,d,e,f,g,h;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=a.length;g="="===a.charAt(i-2)?2:"="===a.charAt(i-1)?1:0,h=new c(3*a.length/4-g),e=g>0?a.length-4:a.length;var j=0;for(b=0,d=0;b<e;b+=4,d+=3)f=k(a.charAt(b))<<18|k(a.charAt(b+1))<<12|k(a.charAt(b+2))<<6|k(a.charAt(b+3)),l((16711680&f)>>16),l((65280&f)>>8),l(255&f);return 2===g?(f=k(a.charAt(b))<<2|k(a.charAt(b+1))>>4,l(255&f)):1===g&&(f=k(a.charAt(b))<<10|k(a.charAt(b+1))<<4|k(a.charAt(b+2))>>2,l(f>>8&255),l(255&f)),h}function m(a){function h(a){return b.charAt(a)}function i(a){return h(a>>18&63)+h(a>>12&63)+h(a>>6&63)+h(63&a)}var c,f,g,d=a.length%3,e="";for(c=0,g=a.length-d;c<g;c+=3)f=(a[c]<<16)+(a[c+1]<<8)+a[c+2],e+=i(f);switch(d){case 1:f=a[a.length-1],e+=h(f>>2),e+=h(f<<4&63),e+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],e+=h(f>>10),e+=h(f>>4&63),e+=h(f<<2&63),e+="="}return e}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="undefined"!=typeof Uint8Array?Uint8Array:Array,d="+".charCodeAt(0),e="/".charCodeAt(0),f="0".charCodeAt(0),g="a".charCodeAt(0),h="A".charCodeAt(0),i="-".charCodeAt(0),j="_".charCodeAt(0);a.toByteArray=l,a.fromByteArray=m}("undefined"==typeof c?this.base64js={}:c)},{}],19:[function(a,b,c){(function(b){"use strict";function h(){try{var a=new Uint8Array(1);return a.foo=function(){return 42},42===a.foo()&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(a){return!1}}function i(){return j.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function j(a){return this instanceof j?(j.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof a?k(this,a):"string"==typeof a?l(this,a,arguments.length>1?arguments[1]:"utf8"):m(this,a)):arguments.length>1?new j(a,arguments[1]):new j(a)}function k(a,b){if(a=t(a,b<0?0:0|u(b)),!j.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;c++)a[c]=0;return a}function l(a,b,c){"string"==typeof c&&""!==c||(c="utf8");var d=0|w(b,c);return a=t(a,d),a.write(b,c),a}function m(a,b){if(j.isBuffer(b))return n(a,b);if(f(b))return o(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return p(a,b);if(b instanceof ArrayBuffer)return q(a,b)}return b.length?r(a,b):s(a,b)}function n(a,b){var c=0|u(b.length);return a=t(a,c),b.copy(a,0,0,c),a}function o(a,b){var c=0|u(b.length);a=t(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function p(a,b){var c=0|u(b.length);a=t(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function q(a,b){return b.byteLength,j.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=j.prototype):a=p(a,new Uint8Array(b)),a}function r(a,b){var c=0|u(b.length);a=t(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function s(a,b){var c,d=0;"Buffer"===b.type&&f(b.data)&&(c=b.data,d=0|u(c.length)),a=t(a,d);for(var e=0;e<d;e+=1)a[e]=255&c[e];return a}function t(a,b){j.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=j.prototype):a.length=b;var c=0!==b&&b<=j.poolSize>>>1;return c&&(a.parent=g),a}function u(a){if(a>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|a}function v(a,b){if(!(this instanceof v))return new v(a,b);var c=new j(a,b);return delete c.parent,c}function w(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return X(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return $(a).length;default:if(d)return X(a).length;b=(""+b).toLowerCase(),d=!0}}function x(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),b<0&&(b=0),c>this.length&&(c=this.length),c<=b)return"";for(;;)switch(a){case"hex":return K(this,b,c);case"utf8":case"utf-8":return F(this,b,c);case"ascii":return I(this,b,c);case"binary":return J(this,b,c);case"base64":return E(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function y(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function z(a,b,c,d){return _(X(b,a.length-c),a,c,d)}function A(a,b,c,d){return _(Y(b),a,c,d)}function B(a,b,c,d){return A(a,b,c,d)}function C(a,b,c,d){return _($(b),a,c,d)}function D(a,b,c,d){return _(Z(b,a.length-c),a,c,d)}function E(a,b,c){return 0===b&&c===a.length?d.fromByteArray(a):d.fromByteArray(a.slice(b,c))}function F(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return H(d)}function H(a){var b=a.length;if(b<=G)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=G));return c}function I(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(127&a[e]);return d}function J(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(a[e]);return d}function K(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;f++)e+=W(a[f]);return e}function L(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function M(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function N(a,b,c,d,e,f){if(!j.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>e||b<f)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function O(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function P(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function Q(a,b,c,d,e,f){if(b>e||b<f)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(c<0)throw new RangeError("index out of range")}function R(a,b,c,d,f){return f||Q(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(a,b,c,d,23,4),c+4}function S(a,b,c,d,f){return f||Q(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(a,b,c,d,52,8),c+8}function U(a){if(a=V(a).replace(T,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function V(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function W(a){return a<16?"0"+a.toString(16):a.toString(16)}function X(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;g++){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Y(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function Z(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function $(a){return d.toByteArray(U(a))}function _(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}var d=a("base64-js"),e=a("ieee754"),f=a("isarray");c.Buffer=j,c.SlowBuffer=v,c.INSPECT_MAX_BYTES=50,j.poolSize=8192;var g={};j.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:h(),j.TYPED_ARRAY_SUPPORT?(j.prototype.__proto__=Uint8Array.prototype,j.__proto__=Uint8Array):(j.prototype.length=void 0,j.prototype.parent=void 0),j.isBuffer=function(b){return!(null==b||!b._isBuffer)},j.compare=function(b,c){if(!j.isBuffer(b)||!j.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var d=b.length,e=c.length,f=0,g=Math.min(d,e);f<g&&b[f]===c[f];)++f;return f!==g&&(d=b[f],e=c[f]),d<e?-1:e<d?1:0},j.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},j.concat=function(b,c){if(!f(b))throw new TypeError("list argument must be an Array of Buffers.");if(0===b.length)return new j(0);var d;if(void 0===c)for(c=0,d=0;d<b.length;d++)c+=b[d].length;var e=new j(c),g=0;for(d=0;d<b.length;d++){var h=b[d];h.copy(e,g),g+=h.length}return e},j.byteLength=w,j.prototype._isBuffer=!0,j.prototype.toString=function(){var b=0|this.length;return 0===b?"":0===arguments.length?F(this,0,b):x.apply(this,arguments)},j.prototype.equals=function(b){if(!j.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===j.compare(this,b)},j.prototype.inspect=function(){var b="",d=c.INSPECT_MAX_BYTES;return this.length>0&&(b=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(b+=" ... ")),"<Buffer "+b+">"},j.prototype.compare=function(b){if(!j.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?0:j.compare(this,b)},j.prototype.indexOf=function(b,c){function d(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[d===-1?0:e-d]){if(d===-1&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c>>=0,0===this.length)return-1;if(c>=this.length)return-1;if(c<0&&(c=Math.max(this.length+c,0)),"string"==typeof b)return 0===b.length?-1:String.prototype.indexOf.call(this,b,c);if(j.isBuffer(b))return d(this,b,c);if("number"==typeof b)return j.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,b,c):d(this,[b],c);throw new TypeError("val must be string, number or Buffer")},j.prototype.write=function(b,c,d,e){if(void 0===c)e="utf8",d=this.length,c=0;else if(void 0===d&&"string"==typeof c)e=c,d=this.length,c=0;else if(isFinite(c))c=0|c,isFinite(d)?(d=0|d,void 0===e&&(e="utf8")):(e=d,d=void 0);else{var f=e;e=c,c=0|d,d=f}var g=this.length-c;if((void 0===d||d>g)&&(d=g),b.length>0&&(d<0||c<0)||c>this.length)throw new RangeError("attempt to write outside buffer bounds");e||(e="utf8");for(var h=!1;;)switch(e){case"hex":return y(this,b,c,d);case"utf8":case"utf-8":return z(this,b,c,d);case"ascii":return A(this,b,c,d);case"binary":return B(this,b,c,d);case"base64":return C(this,b,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,b,c,d);default:if(h)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),h=!0}},j.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var G=4096;j.prototype.slice=function(b,c){var d=this.length;b=~~b,c=void 0===c?d:~~c,b<0?(b+=d,b<0&&(b=0)):b>d&&(b=d),c<0?(c+=d,c<0&&(c=0)):c>d&&(c=d),c<b&&(c=b);var e;if(j.TYPED_ARRAY_SUPPORT)e=this.subarray(b,c),e.__proto__=j.prototype;else{var f=c-b;e=new j(f,void 0);for(var g=0;g<f;g++)e[g]=this[g+b]}return e.length&&(e.parent=this.parent||this),e},j.prototype.readUIntLE=function(b,c,d){b=0|b,c=0|c,d||M(b,c,this.length);for(var e=this[b],f=1,g=0;++g<c&&(f*=256);)e+=this[b+g]*f;return e},j.prototype.readUIntBE=function(b,c,d){b=0|b,c=0|c,d||M(b,c,this.length);for(var e=this[b+--c],f=1;c>0&&(f*=256);)e+=this[b+--c]*f;return e},j.prototype.readUInt8=function(b,c){return c||M(b,1,this.length),this[b]},j.prototype.readUInt16LE=function(b,c){return c||M(b,2,this.length),this[b]|this[b+1]<<8},j.prototype.readUInt16BE=function(b,c){return c||M(b,2,this.length),this[b]<<8|this[b+1]},j.prototype.readUInt32LE=function(b,c){return c||M(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]},j.prototype.readUInt32BE=function(b,c){return c||M(b,4,this.length),16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])},j.prototype.readIntLE=function(b,c,d){b=0|b,c=0|c,d||M(b,c,this.length);for(var e=this[b],f=1,g=0;++g<c&&(f*=256);)e+=this[b+g]*f;return f*=128,e>=f&&(e-=Math.pow(2,8*c)),e},j.prototype.readIntBE=function(b,c,d){b=0|b,c=0|c,d||M(b,c,this.length);for(var e=c,f=1,g=this[b+--e];e>0&&(f*=256);)g+=this[b+--e]*f;return f*=128,g>=f&&(g-=Math.pow(2,8*c)),g},j.prototype.readInt8=function(b,c){return c||M(b,1,this.length),128&this[b]?(255-this[b]+1)*-1:this[b]},j.prototype.readInt16LE=function(b,c){c||M(b,2,this.length);var d=this[b]|this[b+1]<<8;return 32768&d?4294901760|d:d},j.prototype.readInt16BE=function(b,c){c||M(b,2,this.length);var d=this[b+1]|this[b]<<8;return 32768&d?4294901760|d:d},j.prototype.readInt32LE=function(b,c){return c||M(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},j.prototype.readInt32BE=function(b,c){return c||M(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},j.prototype.readFloatLE=function(b,c){return c||M(b,4,this.length),e.read(this,b,!0,23,4)},j.prototype.readFloatBE=function(b,c){return c||M(b,4,this.length),e.read(this,b,!1,23,4)},j.prototype.readDoubleLE=function(b,c){return c||M(b,8,this.length),e.read(this,b,!0,52,8)},j.prototype.readDoubleBE=function(b,c){return c||M(b,8,this.length),e.read(this,b,!1,52,8)},j.prototype.writeUIntLE=function(b,c,d,e){b=+b,c=0|c,d=0|d,e||N(this,b,c,d,Math.pow(2,8*d),0);var f=1,g=0;for(this[c]=255&b;++g<d&&(f*=256);)this[c+g]=b/f&255;return c+d},j.prototype.writeUIntBE=function(b,c,d,e){b=+b,c=0|c,d=0|d,e||N(this,b,c,d,Math.pow(2,8*d),0);var f=d-1,g=1;for(this[c+f]=255&b;--f>=0&&(g*=256);)this[c+f]=b/g&255;return c+d},j.prototype.writeUInt8=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,1,255,0),j.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),this[c]=255&b,c+1},j.prototype.writeUInt16LE=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,2,65535,0),j.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):O(this,b,c,!0),c+2},j.prototype.writeUInt16BE=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,2,65535,0),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):O(this,b,c,!1),c+2},j.prototype.writeUInt32LE=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,4,4294967295,0),j.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=255&b):P(this,b,c,!0),c+4},j.prototype.writeUInt32BE=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,4,4294967295,0),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b):P(this,b,c,!1),c+4},j.prototype.writeIntLE=function(b,c,d,e){if(b=+b,c=0|c,!e){var f=Math.pow(2,8*d-1);N(this,b,c,d,f-1,-f)}var g=0,h=1,i=b<0?1:0;for(this[c]=255&b;++g<d&&(h*=256);)this[c+g]=(b/h>>0)-i&255;return c+d},j.prototype.writeIntBE=function(b,c,d,e){if(b=+b,c=0|c,!e){var f=Math.pow(2,8*d-1);N(this,b,c,d,f-1,-f)}var g=d-1,h=1,i=b<0?1:0;for(this[c+g]=255&b;--g>=0&&(h*=256);)this[c+g]=(b/h>>0)-i&255;return c+d},j.prototype.writeInt8=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,1,127,-128),j.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),b<0&&(b=255+b+1),this[c]=255&b,c+1},j.prototype.writeInt16LE=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,2,32767,-32768),j.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):O(this,b,c,!0),c+2},j.prototype.writeInt16BE=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,2,32767,-32768),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):O(this,b,c,!1),c+2},j.prototype.writeInt32LE=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,4,2147483647,-2147483648),j.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):P(this,b,c,!0),c+4},j.prototype.writeInt32BE=function(b,c,d){return b=+b,c=0|c,d||N(this,b,c,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b):P(this,b,c,!1),c+4},j.prototype.writeFloatLE=function(b,c,d){return R(this,b,c,!0,d)},j.prototype.writeFloatBE=function(b,c,d){return R(this,b,c,!1,d)},j.prototype.writeDoubleLE=function(b,c,d){return S(this,b,c,!0,d)},j.prototype.writeDoubleBE=function(b,c,d){return S(this,b,c,!1,d)},j.prototype.copy=function(b,c,d,e){if(d||(d=0),e||0===e||(e=this.length),c>=b.length&&(c=b.length),c||(c=0),e>0&&e<d&&(e=d),e===d)return 0;if(0===b.length||0===this.length)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("sourceStart out of bounds");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),b.length-c<e-d&&(e=b.length-c+d);var g,f=e-d;if(this===b&&d<c&&c<e)for(g=f-1;g>=0;g--)b[g+c]=this[g+d];else if(f<1e3||!j.TYPED_ARRAY_SUPPORT)for(g=0;g<f;g++)b[g+c]=this[g+d];else Uint8Array.prototype.set.call(b,this.subarray(d,d+f),c);return f},j.prototype.fill=function(b,c,d){if(b||(b=0),c||(c=0),d||(d=this.length),d<c)throw new RangeError("end < start");if(d!==c&&0!==this.length){if(c<0||c>=this.length)throw new RangeError("start out of bounds");if(d<0||d>this.length)throw new RangeError("end out of bounds");var e;if("number"==typeof b)for(e=c;e<d;e++)this[e]=b;else{var f=X(b.toString()),g=f.length;for(e=c;e<d;e++)this[e]=f[e%g]}return this}};var T=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":18,ieee754:21,isarray:20}],20:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],21:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],22:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var n,o,p,q,l=a[k].replace(h,"%20"),m=l.indexOf(c);m>=0?(n=l.substr(0,m),o=l.substr(m+1)):(n=l,o=""),p=decodeURIComponent(n),q=decodeURIComponent(o),d(g,p)?e(g[p])?g[p].push(q):g[p]=[g[p],q]:g[p]=q}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],23:[function(a,b,c){"use strict";function f(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var d=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?f(g(a),function(g){var h=encodeURIComponent(d(g))+c;return e(a[g])?f(a[g],function(a){return h+encodeURIComponent(d(a))}).join(b):h+encodeURIComponent(d(a[g]))}).join(b):h?encodeURIComponent(d(h))+c+encodeURIComponent(d(a)):""};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],24:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":22,"./encode":23}]},{},[1])(1)}),function(){if(window.VueSocketcluster={},!socketCluster)throw new Error("[Vue-SC] cannot locate socketcluster-client");var a={install:function(a,b){"object"==typeof b?b.hostname&&b.port||(b.hostname="localhost",b.port=3e3):b={hostname:"localhost",port:3e3};var c=socketCluster.connect(b),d=c.onevent;c.onevent=function(a){var b=a.data||[];d.call(this,a),a.data=["*"].concat(b),d.call(this,a)};var e=["connect","error","disconnect","reconnect","reconnect_attempt","reconnecting","reconnect_error","reconnect_failed"];a.mixin({created:function(){var a=this;if(this.$options.hasOwnProperty("sockets")){for(var b in a.$options.sockets)a.$options.sockets.hasOwnProperty(b)&&e.indexOf(b)<0&&c.on(b,function(c,d,e){a.$options.sockets[b].call(a,d,e)});e.forEach(function(b){c.on(b,function(c,d){a.$options.sockets.hasOwnProperty(b)&&a.$options.sockets[b].call(a,c,d)})})}this.$sc=c}})}};"object"==typeof exports?module.exports=a:"function"==typeof define&&define.amd?define([],function(){return a}):window.Vue&&(window.VueSocketcluster=a)}();