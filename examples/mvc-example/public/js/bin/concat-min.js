"use strict";var sessionComponent=Vue.extend({template:templatizer.session.create({})}),usersComponent=Vue.extend({template:templatizer.users.create({}),data:function(){return{first:"",last:"",email:"",password:"",ready:!1}},methods:{fetchData:function(e){e&&"function"==typeof e&&e(null)},clearFields:function(){this.first="",this.last="",this.email="",this.password=""},create:function(){var e=this;validate.async({first:e.first,last:e.last,email:e.email,password:e.password,visible:1},{first:{presence:!0},last:{presence:!0},email:{presence:!0},password:{presence:!0}}).then(function(t){e.$root.$sc.emit("users",{method:"store",user:t},function(t,r){return t?e.$root.alert(t,"error"):void console.log(r)})},function(t){var r=null;for(var o in t){r=t[o][0];break}e.$root.alert(r,"error")})}},ready:function(){},route:{data:function(e){var t=this;t.fetchData(function(r){r?e.abort():(t.ready=!0,t.clearFields(),e.next())})},waitForData:!0}}),router=new VueRouter;Vue.use(VueRouter),Vue.use(VueSocketcluster),router.map({"/session/create":{component:sessionComponent,auth:!1},"/users/create":{component:usersComponent,auth:!1}}),router.redirect({"*":"/session/create"}),router.beforeEach(function(e){router.app.loading=!0,e.to.auth&&!router.app.authenticated?(router.app.loading=!1,e.redirect("/session/create")):router.app.authenticated&&!e.to.auth?(router.app.loading=!1,e.redirect("/")):e.next()}),router.afterEach(function(e){setTimeout(function(){router.app.loading=!1},50)}),router.start(Vue.extend({data:function(){return{show_success:!1,success_msg:"",show_error:!1,error_msg:"",loading:!0,authenticated:!1}},methods:{alert:function(e,t){var r=this;try{r[t+"_msg"]=e,r["show_"+t]=!0,setTimeout(function(){r[t+"_msg"]=null},3e3)}catch(e){}}},sockets:{connect:function(){console.log("Connected to server!")}},components:{alert:VueStrap.alert}}),"#app");